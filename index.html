<!DOCTYPE html>
<html>
<head>
  <title>Nachhaltigkeits-Lernspiel</title>
  <style>
    /* Ähnliche Styles wie im ursprünglichen Spiel */
  </style>
</head>
<body>
  <div id="game-container">
    <h1>Nachhaltigkeits-Lernspiel</h1>
    <div id="game-board">
      <canvas id="game-canvas" width="600" height="400"></canvas>
      <div id="decision-box" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; border: 1px solid #ddd; display: none;">
        <h2 id="decision-title"></h2>
        <p id="decision-description"></p>
        <button id="decision-option1">Option 1</button>
        <button id="decision-option2">Option 2</button>
        <button id="decision-option3">Option 3</button>
      </div>
    </div>
    <div id="score-board">
      <p>Nachhaltigkeits-Score: <span id="score-nachhaltigkeit">0</span></p>
      <p>Umwelt-Impact: <span id="score-umweltimpact">0</span></p>
      <p>Highscore: <span id="highscore">0</span></p>
    </div>
    <button id="restart-button">Wiederholen</button>
  </div>

  <script>
    // Spiellogik und Grafik-Funktionen
    let nachhaltigkeit = 50;
    let umweltimpact = 50;
    let highscore = 0;
    let currentRound = 1;
    const maxRounds = 12;

    const gameCanvas = document.getElementById('game-canvas');
    const ctx = gameCanvas.getContext('2d');

    function drawGameBoard() {
      // Grafik des Spielfelds zeichnen
      ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
      ctx.beginPath();
      ctx.rect(50, 50, 500, 300);
      ctx.stroke();

      // Nachhaltigkeits-Score und Umwelt-Impact darstellen
      ctx.font = '24px Arial';
      ctx.fillText(`Nachhaltigkeits-Score: ${nachhaltigkeit}`, 100, 100);
      ctx.fillText(`Umwelt-Impact: ${umweltimpact}`, 100, 150);
    }

    function showDecision(title, description, option1, option2, option3) {
      // Ähnlich wie im ursprünglichen Spiel
    }

    function handleDecision(option) {
      const decisionBox = document.getElementById('decision-box');
      decisionBox.style.display = 'none';

      // Entscheidungslogik basierend auf der gewählten Option
      switch (option) {
        case 1:
          // Nachhaltige Maßnahmen ergreifen
          nachhaltigkeit += 10;
          umweltimpact -= 5;
          break;
        case 2:
          // Keine Maßnahmen ergreifen
          nachhaltigkeit += 5;
          umweltimpact += 5;
          break;
        case 3:
          // Umweltschädliche Maßnahmen ergreifen
          nachhaltigkeit -= 10;
          umweltimpact += 10;
          break;
      }

      // Highscore aktualisieren
      const score = nachhaltigkeit - umweltimpact;
      if (score > highscore) {
        highscore = score;
      }

      // Grafik aktualisieren
      drawGameBoard();
      updateScoreBoard();

      // Nächste Runde
      currentRound++;
      if (currentRound <= maxRounds) {
        setTimeout(showNextDecision, 2000);
      } else {
        showFinalScore();
      }
    }

    function showNextDecision() {
      // Zufällige Entscheidungen für die nächste Runde auswählen
      const decisions = [
        {
          title: "Neue Umweltauflagen",
          description: "Die Regierung hat neue Umweltauflagen für die Landwirtschaft eingeführt. Wie sollen wir darauf reagieren?",
          option1: "Nachhaltige Maßnahmen ergreifen",
          option2: "Keine Maßnahmen ergreifen",
          option3: "Umweltschädliche Maßnahmen ergreifen"
        },
        {
          title: "Investition in erneuerbare Energien",
          description: "Wir haben die Möglichkeit, in erneuerbare Energien zu investieren. Wie sollen wir vorgehen?",
          option1: "Investition in erneuerbare Energien",
          option2: "Keine Investition",
          option3: "Investition in fossile Brennstoffe"
        },
        // Weitere Entscheidungen hinzufügen
      ];

      const randomIndex = Math.floor(Math.random() * decisions.length);
      const decision = decisions[randomIndex];
      showDecision(decision.title, decision.description, decision.option1, decision.option2, decision.option3);
    }

    function updateScoreBoard() {
      document.getElementById('score-nachhaltigkeit').textContent = nachhaltigkeit;
      document.getElementById('score-umweltimpact').textContent = umweltimpact;
      document.getElementById('highscore').textContent = highscore;
    }

    function showFinalScore() {
      alert(`Spiel beendet! Dein Nachhaltigkeits-Highscore ist ${highscore}.`);
    }

    // Spielstart
    drawGameBoard();
    showNextDecision();

    // Restart-Funktion
    document.getElementById('restart-button').addEventListener('click', () => {
      nachhaltigkeit = 50;
      umweltimpact = 50;
      highscore = 0;
      currentRound = 1;
      drawGameBoard();
      showNextDecision();
    });
  </script>
</body>
</html>
